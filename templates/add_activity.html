{# templates/add_activity.html #} {% extends "base.html" %} {% block title %}Add
Activity Â· Just Did It{% endblock %} {% block content %} {% with messages =
get_flashed_messages(with_categories=true) %} {% if messages %}
<div class="error-messages">
  {% for category, message in messages %}
  <div class="alert alert-{{ category }}">{{ message }}</div>
  {% endfor %}
</div>
{% endif %} {% endwith %}

<div class="new-activity-container">
  <form method="POST" action="{{ url_for('add_activity') }}">
    {{ form.hidden_tag() }}

    <div class="form_field">
      {{ form.name(class="form-control", placeholder="Activity name") }}
    </div>

    {# Iconify search lives INSIDE the form #}
    <div class="form_field">
      <!-- <label for="iconSearch">Search thousands of icons</label> -->
      <input
        id="iconSearch"
        type="text"
        autocomplete="off"
        placeholder="Search (e.g., run, yoga)"
      />
      <div id="iconResults" class="icon-grid"></div>
      <input type="hidden" id="iconRef" name="{{ form.icon_ref.name }}" />
      {% for err in form.icon_ref.errors %}
      <div class="error">{{ err }}</div>
      {% endfor %}
    </div>

    <div class="submit_button">{{ form.submit() }}</div>
  </form>
</div>
{% endblock %} {% block scripts %}
<script
  src="{{ url_for('static', filename='icons_script.js') }}"
  defer
></script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // adjust selector to match your flash markup
    document.querySelectorAll('.alert, .flash').forEach((el) => {
      setTimeout(() => {
        el.style.transition = 'opacity 300ms';
        el.style.opacity = '0';
        setTimeout(() => el.remove(), 320);
      }, 2000);
    });
  });
</script>

{% endblock %}
