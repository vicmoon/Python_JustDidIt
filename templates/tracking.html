{# templates/tracking.html #} {% extends "base.html" %} {% block title %}Track ·
Just Did It{% endblock %} {% block content %}
<!-- Activities header -->
<section class="container mb-3" style="max-width: 1100px">
  <div class="d-flex justify-content-between align-items-center">
    <h2 class="h5 m-0">Your activities</h2>
    <a class="btn btn-sm btn-primary" href="{{ url_for('add_activity') }}"
      >Add Activity</a
    >
  </div>

  {% if activities %}
  <ul id="activityList" class="list-unstyled d-flex flex-wrap gap-3 mt-2">
    {% for a in activities %}
    <li class="activity-pill" data-id="{{ a.id }}" data-icon="{{ a.icon }}">
      <img
        src="{{ url_for('static', filename='icons/' ~ a.icon) }}"
        alt=""
        width="20"
        height="20"
        loading="lazy"
      />
      <span>{{ a.name }}</span>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p class="text-muted mt-2">No activities yet.</p>
  {% endif %}
</section>

<!-- Month header / nav -->
<h2 class="cal-title">{{ month }} {{ year }}</h2>

<nav class="mointro-a">
  <a href="{{ url_for('track', year=prev_year, month=prev_month) }}">← Prev</a>
  <span class="divider">|</span>
  <a href="{{ url_for('track', year=next_year, month=next_month) }}">Next →</a>
</nav>

<!-- Optional compact month list -->
<nav class="month-nav months">
  {% for mname, mnum in month_numbers.items() %}
  <a
    href="{{ url_for('track', year=year, month=mnum) }}"
    class="{% if mnum == month_num %}active{% endif %}"
  >
    {{ mname }}
  </a>
  {% endfor %}
</nav>

<!-- Weekday header -->
<ul class="calendar-grid weekday-row" aria-hidden="true">
  <li>M</li>
  <li>T</li>
  <li>W</li>
  <li>T</li>
  <li>F</li>
  <li>S</li>
  <li>S</li>
</ul>

<!-- 6-row (42 cells) calendar -->
<ul class="calendar-grid">
  {# Leading blanks #} {% for _ in range(leading_blanks) %}
  <li class="calendar-box empty" aria-hidden="true"></li>
  {% endfor %} {# Real days #} {% for day in range(1, num_days + 1) %} {% set
  date_str = "{:04d}-{:02d}-{:02d}".format(year, month_num, day) %}
  <li class="calendar-box" data-date="{{ date_str }}">
    <span class="day-number">{{ day }}</span>
    <div class="day-icons">
      {% for icon in icons_by_date.get(date_str, []) %}
      <img
        src="{{ url_for('static', filename='icons/' ~ icon) }}"
        alt=""
        class="day-icon"
      />
      {% endfor %}
    </div>
  </li>
  {% endfor %} {# Trailing blanks #} {% for _ in range(trailing_blanks) %}
  <li class="calendar-box empty" aria-hidden="true"></li>
  {% endfor %}
</ul>
{% endblock %} {% block body_end %} {# Move scripts here so they load after the
HTML. Keep main.js/page JS separate if you like. #}

<script>
  // Auto-dismiss flash messages after ~2s (if you're using Bootstrap classes)
  setTimeout(() => {
    document.querySelectorAll('.alert').forEach((el) => {
      el.classList.remove('show');
      el.classList.add('fade');
      setTimeout(() => el.remove(), 500);
    });
  }, 2000);
</script>

<script>
  // logs passed from the view; ensure you render with `logs` or change name accordingly
  const loggedDays = {{ logs|tojson }};
  console.log('loggedDays', loggedDays);
</script>

<script
  src="{{ url_for('static', filename='script.js', v=asset_version) }}"
  defer
></script>
{% endblock %}
